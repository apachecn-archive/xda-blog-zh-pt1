<html>
<head>
<title>Here's how to boot Microsoft's own Linux distribution: CBL-Mariner</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>以下是如何启动微软自己的 Linux 发行版:CBL 水手</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/boot-cbl-mariner-microsoft-linux-distribution/#0001-01-01">https://www.xda-developers.com/boot-cbl-mariner-microsoft-linux-distribution/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>距离微软<a href="https://www.xda-developers.com/microsoft-announces-windows-terminal/">发布其 Linux Windows 子系统的第二个版本</a>已经有几年了，现在运行时已经足够成熟，可以<a href="https://www.xda-developers.com/run-gui-linux-apps-windows-10-wsl/">用 GUI 运行 Linux 应用程序</a>。旅程的下一步不是别人，正是 Android 的<a href="https://www.xda-developers.com/wundows-subsystem-android-benchmarks-solid-performance/"> Windows 子系统</a>，它将让你<a href="https://www.xda-developers.com/windows-11-android-apps/">在 Windows 11 </a>下运行 Android 应用。微软对 Linux 的热爱不止于此，因为该公司也一直在维护一个成熟的 Linux 发行版。该发行版被称为 CBL-马里纳(其中 CBL 代表 Linux 操作系统),由微软的 Linux 系统小组开发，该小组开发了用于 WSL 2 的 Linux 内核。</p>

 
<blockquote>
<p/><h4>“CBL 水手是微软的云基础设施和边缘产品和服务的内部 Linux 发行版。CBL-水手旨在为这些设备和服务提供一个一致的平台，并将增强微软保持 Linux 更新的能力。”</h4>
<p/><h4>-微软</h4>
 </blockquote>
<p>值得注意的是，CBL 水手不是一个传统的以用户为中心的 Linux 发行版，它有一个奇特的 GUI。相反，它只有支持和运行容器所需的基本包。包管理系统是基于 RPM 的，它同时使用了<code>dnf</code>和<code>tdnf</code> ( <a href="https://github.com/vmware/tdnf">小 DNF </a>)。该发行版还支持基于映像的更新机制，使用<a href="https://rpm-ostree.readthedocs.io/en/stable/"> RPM-OSTree </a>进行原子服务和回滚。至于安全性，CBL 水手号附带了一个加固的内核、签名更新、ASLR、基于编译器的加固和防篡改日志等许多其他功能。</p>

<hr/>


<h2 id="how-to-boot-cbl-mariner-using-the-official-iso">如何启动 CBL 水手使用官方 ISO</h2>
<p>尽管微软早在 2020 年就发布了该操作系统，但该公司最初并没有提供预编译的 ISOs。GitHub 上有源代码<a href="https://github.com/microsoft/CBL-Mariner">，人们希望</a><a href="https://blog.jreypo.io/2021/07/09/a-look-into-cbl-mariner-microsoft-internal-linux-distribution/">自己构建 ISO </a>。这种情况最近有所改变，因为微软现在在其服务器上托管官方的 CBL-水手 ISO 版本。</p>

<p>虽然有经验的用户仍然可以从 CBL-水手软件包库中预编译的 rpm 创建可引导的 VHDX(或 VHD)映像，但也可以获取 ISO 格式的安装盘映像，并在虚拟化平台或真实 PC 上轻松安装操作系统。</p>

<h3 id="step-1-get-the-iso">步骤 1–获取 ISO</h3>
<p>CBL 水手 ISO 是 UEFI 兼容的，可以在任何现代 x86-64 PC 上引导。最新版本的 ISO 可从以下链接下载:</p>

<p/><p><strong> <a href="https://aka.ms/mariner-1.0-x86_64-iso">下载 CBL 水手 ISO </a> </strong></p>

<p>如果您想自己构建 ISO，请执行以下操作:</p>

<ol> <li>使用 git 克隆 CBL-水手 GitHub repo:<pre> <code class="hljs php">git <span class="hljs-keyword">clone</span> https:</code> </pre></li> <li>切换到工具箱文件夹:<pre> <code class="hljs bash"><span class="hljs-built_in">cd</span> CBL-Mariner/toolkit</code> </pre></li> <li>执行 ISO 编译命令:<pre> <code class="hljs ">sudo make iso REBUILD_TOOLS=y REBUILD_PACKAGES=n CONFIG_FILE=./imageconfigs/full.json</code> </pre></li> <li>产生的 ISO 可以在<code>../out/images/full</code>中找到。</li> </ol>

<h3 id="step-2-prepare-the-target-platform">步骤 2–准备目标平台</h3>
<p>如前所述，CBL 水手并不意味着是一个日常驱动你的电脑操作系统。最好将其安装在虚拟机管理程序平台上。在 Windows 上，您可以使用微软自己的 Hyper-v。<a href="https://www.virtualbox.org/">Oracle VM VirtualBox</a>是另一个跨平台解决方案，可以在 Windows、Linux 以及 macOS 上使用。根据主机操作系统，您也可以选择合适的 VMware 或<a href="https://www.xda-developers.com/parallels-17-mac-review/"> Parallels </a>虚拟化产品。</p>

<p>在本教程中，为了方便起见，我们将使用 Hyper-V。</p>

<ol> <li>由于 Hyper-V 是作为一个可选功能内置到 Windows 中的，我们需要先<a href="https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/quick-start/enable-hyper-v">启用它</a>。家庭和家庭单一语言 SKU 不正式支持 Hyper-V，但有可能使用<a href="https://www.xda-developers.com/how-to-install-hyper-v-windows-11-home/">本教程</a>在那些版本上启用该功能。</li> <li>打开 Hyper-V Manager 应用程序，选择<em>操作- &gt;新建- &gt;虚拟机</em>。给你的虚拟机起个名字，然后按<em>下一步&gt;T3。</em></li> <li>选择<em>第 1 代</em> (VHD)或<em>第 2 代</em> (VHDX)，然后按<em>下一个&gt; </em>。</li> <li>如果需要，更改内存大小，然后按下<em>下一个&gt;T1。</em></li> <li>选择一个虚拟交换机，然后按<em>下一个&gt;T1。</em></li> <li>选择<em>创建虚拟硬盘</em>，为您的 VHD(X)选择一个位置，并设置您想要的磁盘大小。然后按下<em>下一个&gt;T3。</em></li> <li>选择<em>从可引导镜像文件</em>安装操作系统，并浏览至您的 CBL 水手 ISO。</li> <li>按<em>结束</em>。</li> </ol>

<p>如果您已经创建了第 2 代虚拟机，那么您必须配置几个附加设置:</p>

<ol> <li>在 Hyper-V 管理器中右键单击您的虚拟机。</li> <li>选择<em>设置...</em>选项。</li> <li>选择<em>安全</em>，在<em>模板</em>下:选择<em>微软 UEFI 认证机构</em>。</li> <li>选择<em>固件</em>并调整引导顺序，使 DVD 优先，硬盘其次。</li> <li>选择<em>应用</em>应用所有更改。</li> </ol>

<h3 id="step-3-installing-the-os">步骤 3–安装操作系统</h3>
<p>现在我们已经准备好了平台，我们准备在虚拟机上安装 CBL 水手。</p>

<ol> <li>右键单击您的虚拟机并选择<em>连接...</em>开始引导的选项。</li> <li>选择<em>开始</em>。</li> <li>安装应用程序将给出以文本或图形模式继续的选项。在本教程中，我们将选择后者。</li> <li>有两种安装类型:核心安装和完全安装。</li> <li>在选择您想要的风格后，它会询问您典型的参数，如用户名、分区等。</li> <li>安装完成后，选择重新启动以重新启动机器。安装 ISO 将自动弹出。</li> </ol>

<h3 id="step-4-booting-the-os">步骤 4–启动操作系统</h3>
<p>一旦安装阶段结束，虚拟机将重新启动，并随后开始从虚拟硬盘引导新安装的操作系统。出现提示时，使用通过安装程序应用程序提供的用户名和密码登录到您的 CBL 水手实例。</p>



<hr/>

<p>就是这样！您现在可以添加额外的包，如 SSH 服务器，并根据您的需要定制 VM 实例。更多关于它的安全特性，请看一下<a href="https://github.com/microsoft/CBL-Mariner/blob/1.0/toolkit/docs/security/security-features.md"> CBL 水手的 GitHub 安全特性列表</a>。</p>

 </div>


</div>    
</body>
</html>