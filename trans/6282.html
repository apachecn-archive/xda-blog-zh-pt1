<html>
<head>
<title>Enable "Hold for Assistant" gesture from Android 12 on older versions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>在旧版本的 Android 12 上启用“等待助手”手势</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/enable-android-12-hold-for-assistant-gesture/#0001-01-01">https://www.xda-developers.com/enable-android-12-hold-for-assistant-gesture/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>谷歌的大型(虚拟)I/O 开发者大会上周举行，在展会上，我们得到了山景城公司正在开发的所有新服务和功能的预告片。对我们来说，最激动人心的消息是<a href="https://www.xda-developers.com/android-12/"> Android 12 </a>的大发布，尽管第一个测试版<a href="https://www.xda-developers.com/android-12-beta-1-hands-on/">缺少了很多承诺的功能</a>，但它仍然有很多值得我们仔细研究的地方。Beta 1 中的一个新功能是一个名为“等待助手”的手势，但事实证明，这个手势本身对 Android 来说并不陌生。事实上，早在 Android 10 的代码库中就有启用它的方法，我们将向您展示如何启用它。</p>

  
<p>在 Android 12 Beta 1 中，你会发现新的“等待助手”手势隐藏在设置&gt;系统&gt;手势&gt;电源菜单下。启用时，该功能允许用户“通过按住电源按钮来触发助手”根据你的设备，类似的手势可能已经存在，但启用该功能的设置至少对 Pixel 手机来说是新的。</p>





<p/><p><em>左:按住一加 9 上 OxygenOS 11 中的电源按钮设置。右图:谷歌 Pixel 5 上 Android 12 Beta 1 中的电源菜单设置。</em></p>

<p>使用简单的 ADB shell 命令，可以改变 Android 10 和 Android 11 上长按电源按钮手势的行为，以模仿 Android 12 的“等待助手”手势。这是可能的，因为谷歌在 Android 中添加了代码，允许长按电源按钮功能在运行时调整。这种代码变化是在 2019 年合并到 Android 中的<a href="https://cs.android.com/android/_/android/platform/frameworks/base/+/b458f4eee871292dcd94892cc0700fd7998fc279">，并且存在于 Android 10 中，正如我在我的<s>专用 Google Photos 上传机器</s> Google Pixel XL 上确认的那样。你所需要做的就是修改<code>Settings.Global.power_button_long_press</code>和<code>Settings.Global.power_button_very_long_press</code>的值，这两个设置值分别覆盖了框架定义的值<code>config_longPressOnPowerBehavior</code>和<code>config_veryLongPressOnPowerBehavior</code>。“<code>power_button_long_press</code>和“<code>power_button_very_long_press</code>的可能值在 AOSP 的</a><a href="https://cs.android.com/android/platform/superproject/+/master:frameworks/base/services/core/java/com/android/server/policy/PhoneWindowManager.java"> PhoneWindowManager </a>类下定义。但是，您不需要仔细阅读这些页面，因为我将演示如何更改这些值以及可以将它们更改为什么。</p>

 
<h2 id="enable-android-12-s-hold-for-assistant-gesture-on-android-10-11">在 Android 10-11 上启用 Android 12 的“等待助手”手势</h2>
<section class="emaki-custom-block emaki-custom-note"><div class="emaki-custom note" id="custom_block_6"><p><strong>这种方法可能并不适用于所有运行 Android 10 或 Android 11 的设备。虽然我们知道它可以在 Pixel 手机上工作，但我们不知道 OEM 厂商对 Android 的改变是否阻止了这种方法。您的里程可能会有所不同！</strong></p> </div></section>
<ol> <li>在你的 PC 上安装并设置<a href="https://www.xda-developers.com/install-adb-windows-macos-linux/">ADB</a>或者在你的手机上安装并设置<a href="https://www.xda-developers.com/debloat-your-phone-run-adb-shell-commands-no-root-no-pc/">LADB</a>(仅限 Android 11)。这两种方式都可行，因为我们只需要访问 Android 的 shell 界面，并拥有足够的权限来修改设置表。(这意味着像 Play Store 下的“素材终端”这样的应用将无法工作，除非<a href="https://www.xda-developers.com/root/">你有 root 权限</a>。)</li> <li>在 shell 中运行以下命令来更改长按电源按钮的行为:<pre> <code class="hljs php">adb shell settings put <span class="hljs-keyword">global</span> power_button_long_press X</code> </pre>其中“X”是下列之一:<ul> <li>“0”表示“什么都不做”(即。长按电源按钮不起任何作用)</li> <li>“1”代表“全球行动”(即显示正常电源菜单)</li> <li>“2”代表“关闭”(即关闭电话电源)</li> <li>“3”表示“关闭无确认”(即立即关闭电话电源)</li> <li>“4”表示“转到语音助手”(启动带有自上而下对话框和“搜索歌曲”按钮的旧助手 UI)</li> <li>“5”代表“助理”(即。启动默认助手服务，如“设置”下的“默认应用程序”中所定义)</li> </ul> </li> <li>在 shell 中运行以下命令来改变<i>非常</i> (3.5s)长按电源按钮的行为:<pre> <code class="hljs php">adb shell settings put <span class="hljs-keyword">global</span> power_button_very_long_press X</code> </pre>其中“X”是下列之一:<ul> <li>“0”表示“什么都不做”(即。很长时间-按下电源按钮不起作用)</li> <li>“1”代表“全球行动”(即显示正常电源菜单)</li> </ul> </li> <li>为了不把自己锁在电源菜单之外(有趣的是，目前在 Android 12 Beta 1 中，当你启用“等待助手”时就是这种情况！)，我建议用下面的值运行上面的两个命令:<pre> <code class="hljs php">adb shell settings put <span class="hljs-keyword">global</span> power_button_long_press <span class="hljs-number">5</span></code> </pre> <pre> <code class="hljs php">adb shell settings put <span class="hljs-keyword">global</span> power_button_long_press <span class="hljs-number">1</span></code> </pre>这将让你长按电源按钮 0.5s 来启动谷歌助手(或任何其他你设置为默认的助手应用程序)，同时让你长按电源按钮 3.5s 来访问电源菜单。</li> <li>要恢复到默认行为，只需将“<code>power_button_long_press</code>”更改为 1，将“<code>power_button_very_long_press</code>”更改为 0，或者运行以下命令:<pre> <code class="hljs sql">adb shell settings <span class="hljs-keyword">delete</span> <span class="hljs-keyword">global</span> power_button_long_press</code> </pre> <pre> <code class="hljs sql">adb shell settings <span class="hljs-keyword">delete</span> <span class="hljs-keyword">global</span> power_button_long_press</code> </pre></li> </ol>

<p>如果你想知道，改变这些值不会影响<em>非常，非常，非常</em>长按电源按钮的行为(即。强制重启电话)，这是用户不能禁用的安全特征。</p>

<hr/>

<p>正如我们最近发现的，谷歌应用程序正准备<a href="https://www.xda-developers.com/google-app-launch-google-assistant-power-button/">为“等待助手”手势添加自己的支持</a>。该功能目前尚不可用，但最新版本的谷歌应用<a href="https://twitter.com/MishaalRahman/status/1395537577051054081">增加了</a>一个“用电源按钮与谷歌对话”屏幕，通知用户他们可以长按电源按钮来访问谷歌助手。有趣的是，这个屏幕还告诉用户，他们可以通过告诉 Assistant“关机”来关闭手机，这是 Assistant 目前不支持的功能。</p>



<p>我们不知道谷歌应用程序将如何实现这一功能——它是否仅限于 Android 12，或者谷歌是否会使用上面提到的内置功能在 Android 10 和 Android 11 上启用它。谷歌应用程序目前缺少完成上述操作所需的必要权限，也缺少触发设备关机或重启所需的权限。我们可能不得不等待新版谷歌应用的出现，但与其等待，不如现在就运行本文中的 ADB 命令来获得 Android 12 的“等待助手”手势！</p>

 </div>


</div>    
</body>
</html>