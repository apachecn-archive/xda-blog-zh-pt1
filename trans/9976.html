<html>
<head>
<title>Android 13 Developer Preview 2 arrives with notification permission requests and other changes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Android 13 开发者预览版 2 带来了通知权限请求和其他变化</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/android-13-developer-preview-2/#0001-01-01">https://www.xda-developers.com/android-13-developer-preview-2/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p>二月份发布了第一个<a href="https://www.xda-developers.com/android-13/"> Android 13 </a>开发者预览版，随之而来的是世界上最大的操作系统的下一次迭代的基础。它带来了许多有益于开发者的变化，并对隐私、材料、语言控制等方面进行了改进。现在，该公司已经宣布了第二个开发者预览版，它有一些额外的功能，并对以前的开发者预览版进行了许多改进。</p>

  
<p>正如标题“开发者预览版”所暗示的，这些版本仅供开发者使用。这是为了测试新功能，并确保他们的应用程序能够在更新的设备上正常工作。会有漏洞，会有其他问题，谷歌将在未来几个月里争取开发者的反馈。如果你不介意遇到问题，那么，无论如何，试一试 Android 13。然而，如果你依赖你的智能手机持续稳定，那么等待预计在今年下半年发布的完整 Android 13 版本可能是值得的。</p>

<p>Android 13 开发者预览版 2 最显著的功能包括:</p>

<ul> <li>通知权限请求</li> <li>开发人员现在可以降低他们的权限</li> <li>大量开发人员生产力的提高</li> </ul>

<hr/>


<h2 id="when-will-android-13-release">Android 13 什么时候发布？</h2>


<p>对于 Android 更新，谷歌通常会揭示一个“平台稳定性”里程碑，以便开发者可以知道谷歌打算何时交付最终的 SDK/NDK API，以及最终的内部 API 和面向应用的系统行为。谷歌打算在 2022 年 6 月达到平台稳定，在正式发布前至少计划几周。Android 12 于 2021 年 8 月达到平台稳定性，最终版本于当年 10 月发布<a href="https://www.xda-developers.com/android-12-launched/">。谷歌发布了</a><a href="https://developer.android.com/about/versions/13/overview">更多关于发布时间表</a>的细节，你可以查看一下。</p>

<hr/>
<p class="ad-odd"> </p>


<h2 id="privacy-and-security">隐私和安全</h2>
<p>谷歌知道用户想要一个可以信任其数据的操作系统。毕竟，智能手机已经在很多方面成为我们自己和我们自己生活的有效延伸。我们用它们来存储重要的照片，与朋友和家人进行私人交谈，并每天随身携带，相信麦克风或相机不会记录下每一次互动。我们已经看到了 Android 13 开发者预览版 1 中引入的 Android 13 权限系统的变化(以及其他变化)，开发者预览版 2 对此进行了扩展。</p>

<h3 id="notification-permission">通知权限</h3>
<p>Android 13 引入了一个新的从应用发送通知的运行时权限:<a href="https://developer.android.com/reference/android/Manifest.permission#POST_NOTIFICATIONS"> POST_NOTIFICATIONS </a>。面向 Android 13 的应用程序现在需要请求用户的许可才能推送通知。对于面向 Android 12 或更低版本的应用程序，系统将处理升级流程，但用户仍会看到一个系统对话框，他们需要接受或拒绝，以允许应用程序推送通知。谷歌鼓励开发者尽早瞄准 Android 13，并在他们的应用程序中请求通知许可<a href="https://developer.android.com/about/versions/13/changes/notification-permission">。</a></p>



<h3 id="developer-downgrade-permissions">开发人员降级权限</h3>
<p>有时，当应用程序更新时，它们不需要以前授予的旧权限。Android 13 引入了一个新的 API，允许开发者降级之前授予的运行时权限。</p>

<h3 id="safer-exporting-of-context-registered-receivers">更安全地导出上下文注册的接收器</h3>
<p>Android 12 引入并要求开发者声明 Android 清单中声明的意图接收者的可导出性。Google 现在要求开发者为上下文注册的接收者做同样的事情，在为非系统源注册接收者时，添加<a href="https://developer.android.com/reference/android/content/Context.html#RECEIVER_EXPORTED" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://developer.android.com/reference/android/content/Context.html%23RECEIVER_EXPORTED&amp;source=gmail&amp;ust=1647549945751000&amp;usg=AOvVaw1mxQq4SCz9nbAJ49f6SDNM"> RECEIVER_EXPORTED </a>或<a href="https://developer.android.com/reference/android/content/Context.html#RECEIVER_NOT_EXPORTED" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://developer.android.com/reference/android/content/Context.html%23RECEIVER_NOT_EXPORTED&amp;source=gmail&amp;ust=1647549945751000&amp;usg=AOvVaw3flP67ywN3hyo6CRHRfnaV"> RECEIVER_NOT_EXPORTED </a>标志。这些在 Android 13 中不会被要求，但强烈建议开发者启用。</p>
<p class="ad-even"> </p>


<h2 id="developer-productivity">开发人员生产力</h2>
<p>如果没有开发人员，Android 就不会是现在的样子，每个平台更新通常都会带来让开发人员的生活更轻松的更新。一些更新无疑增加了难度，但谷歌通常会试图在每次迭代中简化应用程序的开发流程。</p>

<h3 id="improved-japanese-text-wrapping">改进的日语文本换行</h3>
<p>Android 13 DP1 引入了对 TextView 文本换行的改进，现在正在引入一些专门针对日语文本的改进。这一次，TextViews 现在可以通过 Bunsetsu(听起来自然的最小单词单位)或短语(而不是字符)来包装文本，以实现更完善和可读的日语应用程序。你只需要启用<a href="https://developer.android.com/reference/android/R.attr.html#lineBreakWordStyle" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://developer.android.com/reference/android/R.attr.html%23lineBreakWordStyle&amp;source=gmail&amp;ust=1647549945751000&amp;usg=AOvVaw1AZ9Zp26zQiDA_pWRoTLF1">Android:lineBreakWordStyle = "<wbr/></a></p>

<p>带有文本视图的短语。</p>
<div class="body-img landscape"><div class="responsive-img image-expandable img-article-item" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg" data-modal-id="single-image-modal" data-modal-container-id="single-image-modal-container" data-img-caption="&quot;Japanese text wrapping with phrase style enabled (below) and without (above)&quot;">
 
<figure> <picture>  <source media="(min-width: 1024px)" sizes="1500px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg?q=50&amp;fit=crop&amp;w=1500&amp;dpr=1.5"/> <source media="(min-width: 768px)" sizes="943px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg?q=50&amp;fit=crop&amp;w=943&amp;dpr=1.5"/> <source media="(min-width: 481px)" sizes="767px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg?q=50&amp;fit=crop&amp;w=767&amp;dpr=1.5"/> <source media="(min-width: 0px)" sizes="480px" data-srcset="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg?q=50&amp;fit=crop&amp;w=480&amp;dpr=1.5"/> <img class="lazyload" alt="android 13 japanese textview developer preview 2" data-img-url="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg" src="../Images/f95dec42db97b47ceb69e336138be834.png" data-original-src="https://static1.xdaimages.com/wordpress/wp-content/uploads/2022/03/android-13-developer-preview-2-japanese-textview-342843284.jpg"/> </picture> <figcaption class="body-img-caption">Japanese text wrapping with phrase style enabled (below) and without (above)</figcaption> </figure> </div>


 </div>


<h3 id="improved-line-heights-for-non-latin-scripts">改进了非拉丁文字的行高</h3>
<p>在中，Android 13 非拉丁文字(如泰米尔语、缅甸语、泰卢固语和藏语)通过使用适合每种语言的行高来显示。这可以防止裁剪并改善文本定位，而一个应用程序要实现这些改进所需要做的就是瞄准 Android 13。</p>



<h3 id="text-conversion-apis">文本转换 API</h3>
<p>说日语和汉语等语言的人使用拼音输入法，这可能会降低搜索速度和自动完成等功能。在 Android 13 中，应用程序可以调用新的<a href="https://developer.android.com/reference/android/view/inputmethod/TextAttribute" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://developer.android.com/reference/android/view/inputmethod/TextAttribute&amp;source=gmail&amp;ust=1647609404890000&amp;usg=AOvVaw3n8ZTyULlOt9sSCLysDSff">文本转换 API </a>，因此用户可以更快更容易地找到他们想要的东西。以前，使用日语进行搜索需要用户执行以下操作:</p>

<ul> <li>输入平假名作为其搜索词的语音发音(即一个地方或一个应用程序名称)</li> <li>使用键盘将平假名字符转换为汉字，</li> <li>使用汉字字符重新搜索</li> <li>获取他们的搜索结果。</li> </ul>

<p>有了新的文本转换 API，日本用户可以输入平假名并立即看到汉字搜索结果，跳过中间的两个步骤。</p>

<h3 id="color-vector-fonts">彩色矢量字体</h3>
<p>Android 13 增加了对 COLR 版本 1 字体的渲染支持，并将系统表情符号更新为 COLRv1 格式。COLRv1 是一种新的高度紧凑的字体格式，可以在任何大小下快速清晰地呈现。对于大多数应用程序，系统处理一切，COLRv1 只是工作。如果你的应用程序实现了自己的文本渲染并使用了系统字体，谷歌建议测试表情符号渲染。当与<a href="https://www.xda-developers.com/chrome-os-98-unicode-14-emoji-desk-keyboard-shortcuts/"> Chrome OS 98 </a>一起发布时，你可以在 Chrome <a href="https://developer.chrome.com/blog/colrv1-fonts/" target="_blank" rel="noopener" data-saferedirecturl="https://www.google.com/url?q=https://developer.chrome.com/blog/colrv1-fonts/&amp;source=gmail&amp;ust=1647609404890000&amp;usg=AOvVaw0Hd-U_1MSJujeWUh48YUBF">公告</a>中阅读更多关于 COLRv1 的信息。</p>

<h3 id="bluetooth-le-audio">蓝牙乐音响</h3>
<p>蓝牙低能耗音频，顾名思义，是一种通过蓝牙传输音频的低能耗方式。Android 13 带来了官方对它的支持。</p>

<h3 id="midi-2-0">MIDI 2.0</h3>
<p>Android 13 还增加了对新的 MIDI 2.0 标准的支持，包括通过 USB 连接 MIDI 2.0 硬件的能力。MIDI 2.0 提供了一些改进，例如提高了控制器的分辨率，更好地支持非西方语调，以及使用每个音符控制器来增强表现力。</p>

<hr/>
<p class="ad-odd"> </p>


<h2 id="how-to-download-and-install-android-13-developer-preview-2-on-your-google-pixel-device">如何在你的谷歌 Pixel 设备上下载并安装 Android 13 开发者预览版 2</h2>
<p>你可以很容易地<a href="https://www.xda-developers.com/how-to-download-android-13/">下载 Android 开发者预览版 2 </a>，如果你不确定如何安装 Android 13 ，请务必查看我们关于<a href="https://www.xda-developers.com/how-to-install-android-13/">如何安装 Android 13</a>的指南。</p>

<p>谷歌正式发布了针对 Pixel 6 Pro、Pixel 6、Pixel 5a 5G、Pixel 5、Pixel 4a (5G)、Pixel 4a、Pixel 4 XL 或 Pixel 4 的开发者预览更新。您可以在 Android Studio 的 Android 模拟器中使用 64 位系统映像，也可以使用 GSI。</p>

<hr/>

<p>你对最新的开发者预览版有什么想法？你会在你的设备上安装它吗？你的体验如何？请在下面的评论中告诉我们！</p>

 </div>


</div>    
</body>
</html>