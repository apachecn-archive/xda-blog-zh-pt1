# 谷歌 Pixel 手机可能会在 Android 12 上为你翻译应用程序

> 原文：<https://www.xda-developers.com/google-pixel-ui-translation-android-12/>

加入 Pixel 团队的最大障碍之一是可用性:谷歌不会像三星或苹果那样在每个国家销售他们的手机。例如，谷歌即将推出的 [Pixel 5a 5G](https://www.xda-developers.com/google-pixel-5a/) 目前只有[确认将在两个国家推出](https://www.xda-developers.com/google-pixel-5a-canceled/):美国和日本。进口 Pixel 手机始终是一种选择，谷歌在确保其软件在大多数语言中可读方面做得很好。但是第三方服务呢？在 Chrome 中，你可以使用内置的翻译工具将网页翻译成你的母语，但目前还没有办法为 Android 应用程序做到这一点。随着 [Android 12](https://www.xda-developers.com/android-12/) 中的一项新功能，这种情况将会改变，我们已经发现有证据表明它将在 Pixel 手机上可用。

早在 4 月份，[我们报道过](https://www.xda-developers.com/android-12-app-ui-translation/)谷歌正在 Android 12 中开发一个新的框架，用于将应用的 UI 翻译成用户的母语。在[谷歌 I/O 2021](https://www.xda-developers.com/google-io-2021-recap/) 发布首个 Android 12 测试版后，谷歌用新的 [android.view.translation 包](https://developer.android.com/reference/android/view/translation/package-summary.html)以及视图类中的[相关方法更新了其 API 差异报告，与我们上个月发现的相匹配。然而，这些新的 API 是没有文档记录的，这意味着我们只能对它们的预期用途做出有根据的猜测。在一篇博客文章中，开发者 *CommonsWare*](https://developer.android.com/sdk/api_diff/s-beta1-incr/changes/android.view.View) [证实了](https://commonsware.com/blog/2021/05/19/random-musings-android-12-beta-1.html)我们对这一新特性的解释，它将提供“系统提供的用户可见字符串的翻译”正如他所指出的，如果这个功能成为强制性的，它可能会给开发者带来挑战，但毫无疑问，它将使支持有限语言的应用程序更容易被用户使用。

然而，应用程序 UI 翻译[不会成为 Android 12 的标准功能](https://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_TRANSLATION)，因为支持将取决于系统定义的“翻译服务”的存在。这个翻译服务是由框架中的值`config_defaultTranslationService`定义的，正如开发者 [kdrag0n](https://twitter.com/kdrag0n) 向我们指出的，这个值实际上是在 Android 12 Beta 1 中为 Pixel 手机定义的。具体来说，`config_defaultTranslationService`设置为`com.google.android.as/com.google.android.apps.miphone.aiai.translate.services.TranslationService`，其中“`com.google.android.as`为设备个性化服务的包名，“`com.google.android.apps.miphone.aiai.translate.services.TranslationService`为 app 提供的翻译服务的名称。

当前版本的设备个性化服务应用程序实际上没有这项服务，所以我们实际上无法在 Pixel 手机上测试 Android 12 的新 UI 翻译功能。一旦设备个性化服务更新，我们应该能够最终测试这一新功能。由于谷歌使用名为“PixelConfigOverlayCommon”的运行时资源覆盖图(RRO)设置了`config_defaultTranslationService`的值，我们现在认为，一旦发布，该功能将不会局限于特定的 Pixel 手机。如果 Google 打算限制对特定 Pixel 设备的访问，他们可以在一个或多个 PixelConfigOverlay APKs 中定义该值，这些 apk 包含在一代或更多 Pixel 设备中(例如 PixelConfigOverlay2019，用于 Pixel 4 和更高版本)。不过，在该功能发布之前我们无法确定，而且很可能在今年秋天晚些时候推出 [Pixel 6 系列](https://www.xda-developers.com/tag/google-pixel-6/)之前不会发生。