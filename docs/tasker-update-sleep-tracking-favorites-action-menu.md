# Tasker 的最新更新增加了睡眠跟踪和一个喜爱的行动菜单

> 原文：<https://www.xda-developers.com/tasker-update-sleep-tracking-favorites-action-menu/>

# Tasker 的最新更新增加了睡眠跟踪和一个喜爱的行动菜单

最新的 Tasker 更新(v5.1.18)带来了一个新的睡眠跟踪功能，一个最喜欢的动作菜单，等等。查看完整的变更日志。

今年 2 月，Tasker [在测试版频道(v5.12.3)上收到了一个重要的更新](https://www.xda-developers.com/tasker-beta-custom-sleep-tracker-android/)，为应用程序添加了睡眠跟踪自动化。该功能使用谷歌的[睡眠 API](https://www.xda-developers.com/google-sleep-api-sleep-tracking/) 以节省电池的方式集中睡眠检测处理，并帮助用户使用该应用程序轻松跟踪他们的睡眠状态。该功能现已在稳定频道推出，您可以立即试用。

Tasker 5.12.18 中的睡眠状态功能[现已上线](https://www.reddit.com/r/tasker/comments/n3yhbx/dev_tasker_512_now_publicly_available_sleep/?sort=confidence)，并已开始通过谷歌 Play 商店向用户推出。正如在测试版中看到的那样，该功能可以帮助您使用来自手机光线和运动传感器的输入来轻松监控您的睡眠。看看下面的视频，看看如何使用新功能跟踪你的睡眠数据。

除了新的睡眠跟踪功能，最新的 Tasker 更新还添加了一个新的收藏夹操作菜单，让您只需单击一下即可轻松添加您喜欢的操作。此次更新还为运行 Android 11 及以上版本的设备带来了外部存储支持，数组功能等。请在下面的部分查看最新 Tasker 更新的完整 changelog。

### 包 5.12.18 变化日志

*   主要新增内容:
    *   增加了睡眠状态:用 Tasker 追踪你的睡眠。
    *   添加了“睡眠”事件，这样你就可以使用 Google Play 服务发送的所有睡眠事件，这样你就可以记录它们，如果你想的话，或者为了其他你可能需要所有更新的用途
    *   添加了原生 JSON、HTML/XML 和 CSV 格式的点或方括号符号。
    *   当设置一个与结构化类型兼容的全局变量时，Tasker 会问你是否要为该变量启用简单的结构读取
    *   添加了“解析/格式化日期时间”动作，允许以各种格式解析和格式化日期和时间。
    *   添加了简单的匹配/正则表达式操作，允许您轻松地匹配和提取任何文本中的数据。
    *   增加了“数组合并”动作:将 2 个或更多的数组合并成 1 个。
    *   添加了一个新的“滴答”事件，它将在设定的时间间隔内自动触发一个配置文件。时间间隔可以在 100 毫秒到 2 分钟之间。
    *   添加操作时，如果您搜索任务名称并选择“执行任务”操作，任务名称将自动填充。
    *   添加动作时，如果您搜索输入对话框类型并选择“选择输入对话框”动作，对话框类型将自动填充。
    *   添加操作时，如果您搜索特定的 Tasker 功能名称“Tasker 功能”操作，该功能将被自动选择和设置。
    *   项目/配置文件/任务变量中的新设置，允许您自定义独立于变量设置值导出的值。
    *   在编辑任务时，长按“添加”按钮会增加“收藏动作”选项
    *   如果你想的话，你也可以设置喜欢的动作在短点击时显示，如果你想的话，设置常规对话框在长点击时显示。
    *   如果您通过搜索“执行任务”动作直接添加一个预先填写的任务名称，或者添加一个具有特定对话框类型的“选择输入对话框”动作，或者添加一个具有特定功能的“Tasker Function”动作，则收藏夹动作也将直接预先填写相同的选项。
    *   改变了变量列表中长时间点击变量的行为:现在会出现一个帮助菜单，你可以用普通的方式访问变量，这样你就不用记住它们了。
    *   允许通过编写%array(+JOINER)直接连接数组，其中 JOINER 是您喜欢的任何字符。
    *   允许在所有返回多个值的数组函数中指定一个 joiner，比如写%array(+SEPARATOR+1，3，4)。
    *   允许通过使用%array($？表情)
    *   增加了一次查询多个位置的任务阵列的能力。例如%array(1，3，5)将获得数组的第一、第三和第五项。
    *   修正了查询数组中使用变量 ww 而不是直接使用格式的项目，例如:% query = 1:2；%array(%query)无法工作，但现在可以了。
    *   在 Android 11+上增加了对外部 USB 和 SD 卡的支持
    *   添加了在“任务功能”操作中列出所有存储卷的功能
    *   增加了从多个外部存储选项中进行选择的能力，如果在文件选择窗口中有多个可用选项(例如 SD 卡和 USB)
    *   修正了在某些情况下复制文件到 SD 卡的问题
    *   修复了许多其他外部存储相关的问题
*   其他新增内容
    *   在“选择输入对话框”动作中增加了“日历”和“日历输入”选项
    *   在“测试显示”动作中添加了“已锁定”和“已安全锁定”
    *   在“任务功能”动作中增加了“音乐激活”动作
    *   在“媒体控制”动作中增加了“倒带”和“快进”功能
    *   在相关状态/事件/动作中增加了“结构输出”选项
    *   将“结构化变量”选项添加到项目/配置文件/任务变量中
    *   添加了“变量设置结构类型”动作，以明确设置变量结构的类型
    *   增加了“获取位置 v2”的选项，以强制高精度，这意味着它将只使用 GPS 卫星来获取您的位置，而不是其他
    *   在“获取位置 v2”中添加了%gl_satellites 变量，该变量将包含用于获取高精度位置的卫星数量
    *   增加了插件在运行完成后打开 URI 的功能，这样他们就可以在没有权限的情况下启动其他应用
    *   增加了 ADB Wifi 助手，方便设置许可授予/撤销命令
    *   在 HTTP 请求动作的头字段中添加了帮助器，以方便设置常用的头
    *   在“变量拆分”中增加了选项，可以将拆分器用作正则表达式
    *   当没有单独的活动配置文件时，增加了配置任务通知的选项
    *   添加了使项目/概要文件/任务变量不可变的选项。这些变量不能从任务中改变
    *   增加了对结构化全局变量的支持。例如，您现在可以从%Json.info 中读取 JSON
    *   增加了对 JavaScript 中 parseFormatDateTime()变量函数的支持
    *   增加了乌克兰语翻译
    *   允许“输入对话框”的默认文本为“%”
    *   在“值”字段的“数组推送”操作中允许多行输入
    *   允许在"数组集" > "值"中输入空格字符
    *   允许在“可变拆分”操作中使用新的行和空格作为拆分器
    *   允许在“数组集合”操作中使用空格和新行作为分割线
    *   使文本在各种行动领域(如运行外壳，亚行无线，变量集等)不换行，并有可配置的文本大小(新的“命令文本大小”选项)
    *   使某些输入字段中的非等宽换行文本成为可选的(“首选项”>“用户界面”)
*   变化
    *   当选择 MP4 格式时，使用“录制音频”操作录制的声音质量会更好
    *   从“录制音频”动作中删除了“编解码器”选项。现在会根据“格式”自动选择它
    *   在“多变量设置”动作中自动修剪输入变量名称
    *   已更改:如果范围内同时存在多个同名的项目/概要文件/任务变量，那么只有最“内部”的可用范围会受到影响
    *   在某些情况下，不要提醒用户“响铃时振动”操作中缺少 Tasker 设置
    *   使“Ping”动作总是在 10 秒后超时，如果没有得到响应
    *   在启用“锁定”选项的情况下进行“关闭”操作，即使屏幕关闭，也会锁定屏幕
    *   使“变量连接”的“连接符”和“写入文件”的“文本”字段能够接收新行和其他空白字符
    *   当没有活动配置文件时，使 Tasker 监控通知使用与有活动配置文件时不同的通知类别，以便用户可以禁用其中一个而不是另一个
    *   使禁用 Tasker 时出现的“关闭”文本更加明显
    *   从“设备空闲”状态中移除“启用”选项，因为它不做任何事情
    *   需要时直接在 Tasker 文件选择器中请求路径访问
    *   更新了比较数字时使用 6 位小数而不是 3 位小数的条件
    *   使应用程序工厂不使用传统文件访问，而使用新的所需 SAF 文件系统
*   错误修复
    *   修正了如果你的任务设置很大，编辑动作会很慢的问题，特别是当你在设置中使用了很多 Java 函数的时候
    *   修正长期存在的无法在外部存储上解压缩文件的错误
    *   固定使用 Tasker 与“不保持活动”开发选项启用和其他情况下，活动可以重新启动，如切换之间的光明/黑暗的主题，而使用 Tasker
    *   修正了一个长期存在的错误，即被禁用的“For”动作将永远运行
    *   固定 Tasker 不切换 Wifi 的第一次使用后，引导，如果 Tasker 设置需要切换它
    *   修正了一个错误，有时一些小米设备在创建某种通知时会出现崩溃任务
    *   应用当前 Tasker 设置时，不要清除条件局部变量
    *   如果插件操作超时太长，不要错误地警告丢失插件
    *   如果选择了“出错后继续任务”,则在“录制音频”操作中不显示错误警告
    *   当动作本身被启用时，修复对不运行的循环禁用的动作
    *   修复导入旧项目/任务时本地媒体图标和图标仍然存在于同一路径
    *   固定的“收到的文本”事件时，SIM 卡被选中，两个手机上的 SIM 卡有相同的名字
    *   修正了不影响项目/概要文件/任务变量的“测试场景”
    *   修正了某些情况下的“多重变量集”动作
    *   修正了某些情况下的“响铃振动”动作
    *   修复了在某些情况下运行的一些根相关操作
    *   修复了第三方应用程序在外部设置变量
    *   修正了在某些情况下备份对话框没有预先填写备份的文件夹和文件名
    *   修复了新版本 Android 上的 BeyondPod 操作
    *   修正了无法通过 javascript 的“setGlobal()”清除全局变量的错误
    *   修正了有时多个变量设置会失败的错误
    *   修正了一些使用视频元素的场景中的崩溃问题
    *   修正了在某些情况下从下载文件夹中选择图片时的崩溃
    *   修复了“Shell 命令”操作的简易服务命令
    *   修正了任务通知的空图标在某些情况下不适用的问题
    *   修正了当土耳其语被选中时，在某些情况下使用数组输入的问题
    *   修正了在某些情况下当导出一些东西到 Taskernet 时 Tasker 会重新启动的问题
    *   修正了 Tasker 在某些情况下会抱怨密度没有初始化的问题
    *   固定的问题，设置多个变量与做数学启用，但他们中的一些没有数学表达式
    *   修复了使用场景 Web 元素时某些情况下的项目/配置文件/任务变量
    *   修复了无法通过检查%var ~ \%var 来检查%var 是否未设置的问题
    *   修正了在某些情况下可以选择应用程序的操作中通过名称引用应用程序的问题(“启动应用程序”、“媒体控制”等)
    *   修复了从“Java 函数”操作设置项目/配置文件/任务变量
    *   修复了在某些情况下使用概要文件/项目变量的问题
    *   修正了一些编辑动作然后重新开始活动会导致动作输入重置的情况
    *   修正了在某些情况下将 Google Drive 文件下载到外部存储器的问题
    *   使用场景 WebView 中的 setLocal()函数对项目/配置文件/任务变量进行修复
    *   某些项目/概要文件/任务变量的固定变量名提示
    *   尝试修复 Android 11 在某些特定设备上的剪贴板变化感应
    *   修正了一些崩溃

你可以点击这里查看官方的 Tasker 变更日志帖子[，观看展示一些新特性的演示。](https://tasker.joaoapps.com/changes/changes5.12.html)