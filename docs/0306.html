<html>
<head>
<title>How to take logs on Android: Logcat, dmesg, and ramoops</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>如何在Android上记录日志:Logcat、dmesg和ramoops</h1>
<blockquote>原文：<a href="https://www.xda-developers.com/stop-mms-from-showing-up-in-call-logs-on-vibrant/#0001-01-01">https://www.xda-developers.com/stop-mms-from-showing-up-in-call-logs-on-vibrant/#0001-01-01</a></blockquote><div><div class="content-block-regular">
<p/><p>当开发人员诊断一个软件的错误时，日志非常有用。因此，作为一名用户，当你向开发者抱怨他们的Android应用程序或售后固件(定制ROM)的问题时，他们会要求你提交一份日志来帮助他们解决问题。Android包括许多处理固件不同部分的日志，有许多方法可以收集这些日志。在本指南中，我们将讨论各种常见的日志，以及如何在Android上收集这些日志以用于错误报告。</p>

  
<p>在我们开始之前，您应该在您的计算机上设置Android调试桥，因为您可能需要ADB访问这些日志。关于如何在任何电脑上设置ADB，我们有一个很好的指南。</p>




<h2 id="kernel-panic-logs">内核紧急日志</h2>
<p>内核紧急日志有助于了解在不成功的引导过程中发生了什么。如果你试图运行一个定制的ROM，但是你的手机在启动循环时卡住了，你可以收集内核紧急日志来帮助ROM开发者找出错误所在。</p>

<p>大多数Android制造商在出现紧急情况后使用上游的“pstore”和“ramoops”驱动程序来存储内核日志。Ramoops在系统崩溃前将其日志写入RAM。使用root访问权限，可以从以下位置检索这些日志:</p>

<pre> <code class="hljs javascript">/sys/fs/pstore/<span class="hljs-built_in">console</span>-ramoops</code> </pre>
<p>文件名可能略有不同，但它将位于pstore目录中。你可以使用亚行拉或任何其他你想要的方式。例如:</p>

<p><code>adb pull /sys/fs/pstore/console-ramoops C:\Users\Gaurav\Desktop\filename</code></p>
<p class="ad-odd"> </p>


<h2 id="driver-messages">驱动程序消息</h2>
<p>来自驱动程序消息缓冲区的日志可用于诊断系统驱动程序的问题以及某些东西不工作的原因。在Android上，您可以使用“dmesg”输出来获取这些日志。不过，您将需要<a href="https://www.xda-developers.com/root/"> root访问权限</a>来获取这些日志。使用以下ADB命令导出完整的日志。</p>

<pre> <code class="hljs xml"><span class="hljs-selector-tag">adb</span> <span class="hljs-selector-tag">shell</span> <span class="hljs-selector-tag">su</span> <span class="hljs-selector-tag">-c</span> <span class="hljs-selector-tag">dmesg</span> &gt; <span class="hljs-selector-tag">dmesg</span><span class="hljs-selector-class">.log</span></code> </pre><p class="ad-even"> </p>


<h2 id="system-logs">系统日志</h2>
<p>当系统中出现错误时，系统日志非常有用。Android允许使用Logcat收集系统日志。可以在Android Studio的Logcat窗口中查看日志消息，也可以使用命令行工具来获取日志消息。</p>

<p>Google Play商店中也有几个Android应用程序，可以轻松访问这些工具。我们将在本文后面讨论这些应用程序。此外，一些定制的rom在开发者设置中带有收集系统日志的选项。</p>

<p>要使用ADB收集日志，请使用以下命令。这个命令将导出一个连续的日志，所以使用Ctrl + C来停止它。</p>

<pre> <code class="hljs xml"><span class="hljs-selector-tag">adb</span> <span class="hljs-selector-tag">logcat</span> &gt; <span class="hljs-selector-tag">logcat</span><span class="hljs-selector-class">.txt</span></code> </pre>
<p>您可以使用-d参数一次性导出完整的日志。</p>

<pre> <code class="hljs xml"><span class="hljs-selector-tag">adb</span> <span class="hljs-selector-tag">logcat</span> <span class="hljs-selector-tag">-d</span> &gt; <span class="hljs-selector-tag">logcat</span><span class="hljs-selector-class">.txt</span></code> </pre>
<p>如果您愿意，也可以使用以下命令查看或保存无线电缓冲区。</p>

<pre> <code class="hljs xml"><span class="hljs-selector-tag">adb</span> <span class="hljs-selector-tag">logcat</span> <span class="hljs-selector-tag">-db</span> <span class="hljs-selector-tag">radio</span> &gt; <span class="hljs-selector-tag">radio</span><span class="hljs-selector-class">.txt</span></code> </pre>
<p>如果您的设备是rooted用户，您可以使用设备本身的终端应用程序来收集日志。要使用手机上的终端保存日志，请键入以下命令，以便将日志保存在手机上。</p>

<pre> <code class="hljs ">logcat -d -f /sdcard/logcat.txt</code> </pre><p class="ad-odd"> </p>


<h2 id="android-apps-for-collecting-logs">用于收集日志的Android应用</h2>
<h3 id="logcat-extreme">Logcat Extreme</h3>




<p>Logcat Extreme可以帮助您读取Logcat和dmesg输出以及记录日志。需要root访问权限才能正确显示日志。</p>

 



<h3 id="logcat-reader">Logcat阅读器</h3>




<p>Logcat Reader是一款开源应用，可以让你读取和保存系统日志。它根据日志优先级对日志进行颜色编码。</p>

 



<h3 id="liveboot">live boot(live boot)</h3>
<p>这个应用程序不是logcat的合适替代品，但它以自己的方式很酷，值得一提。这个应用的重点不是实际上帮助你调试，而是给你一个另类的开机动画，看起来像是从科幻电影里出来的。</p>





<p>LiveBoot用logcat和dmesg输出替换设备的引导动画。它的输出配置包括logcat级别、缓冲区和格式选择、是否显示dmesg等等。它需要root访问权限以及SuperSU版本2.40或更新版本。你可以在其<a href="https://forum.xda-developers.com/t/app-5-0-root-2020-12-21-liveboot-logcat-dmesg-boot-animation-v1-84.2976189/"> XDA主题</a>中找到关于该应用的更多信息。</p>

 



<hr/>

<p>这些是你可以在Android上收集日志的一些方法。如果你正在寻找一种在你的Android手机上获得root权限的方法，看看我们关于如何给你的手机root的详细指南<a href="https://www.xda-developers.com/root/">。</a></p>

 </div>


</div>    
</body>
</html>